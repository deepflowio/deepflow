################################################################################
#                                                                              #
# Copyright (c) 2024 Yunshan Networks                                          #
#                                                                              #
# Licensed under the Apache License, Version 2.0 (the "License");              #
# you may not use this file except in compliance with the License.             #
# You may obtain a copy of the License at                                      #
#                                                                              #
#     http://www.apache.org/licenses/LICENSE-2.0                               #
#                                                                              #
# Unless required by applicable law or agreed to in writing, software          #
# distributed under the License is distributed on an "AS IS" BASIS,            #
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.     #
# See the License for the specific language governing permissions and          #
# limitations under the License.                                               #
#                                                                              #
################################################################################

language = "C"

header = """
/*
 * Copyright (c) 2024 Yunshan Networks
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"""
include_guard = "TRACE_UTILS_H"
autogen_warning = "/* Warning, this file is autogenerated by cbindgen. Don't modify this manually. */"
sys_includes = ["stdint.h"]
includes = ["consts.h"]
no_includes = true

#### code style ####
line_length = 100
tab_width = 4
line_endings = "LF"

#### codegen options ####
style = "type"
sort_by = "Name"
usize_is_size_t = true

[export]
include = [
  "ProcessShardList",
  "UnwindEntryShard",
  "PythonUnwindInfo",
  "PythonOffsets",
  "LuaRuntimeInfo",
  "LuaUnwindInfo",
  "LuaUnwindTable",
  "LuaOfs",
  "LjOfs"
]
exclude = [
  "bpf_update_elem",
  "bpf_delete_elem",
  "BPF_ANY",
  "bpf_lookup_elem",
  "resolve_addr",
  "clib_mem_alloc_aligned",
  "clib_mem_free",
]
item_types = []
renaming_overrides_prefixing = false

[export.rename]
ShardInfo = "shard_info_t"
ProcessShardList = "process_shard_list_t"
UnwindEntry = "unwind_entry_t"
UnwindEntryShard = "unwind_entry_shard_t"
UnwindTable = "unwind_table_t"
PyCframe = "py_cframe_t"
PyCodeObject = "py_code_object_t"
PyFrameObject = "py_frame_object_t"
PyInterpreterFrame = "py_interpreter_frame_t"
PyInterpreterState = "py_interpreter_state_t"
PyObject = "py_object_t"
PyRuntimeState = "py_runtime_state_t"
PyString = "py_string_t"
PyThreadState = "py_thread_state_t"
PyTupleObject = "py_tuple_object_t"
PyTypeObject = "py_type_object_t"
PythonOffsets = "python_offsets_t"
PythonUnwindInfo = "python_unwind_info_t"
PythonUnwindTable = "python_unwind_table_t"
LuaRuntimeInfo = "lua_runtime_info_t"
LuaUnwindInfo = "lua_unwind_info_t"
LuaUnwindTable = "lua_unwind_table_t"
LuaOfs = "lua_ofs"
LjOfs = "lj_ofs"

[struct]
rename_fields = "SnakeCase"

[enum]
rename_variants = "QualifiedScreamingSnakeCase"
